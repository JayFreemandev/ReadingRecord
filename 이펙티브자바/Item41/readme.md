# Item41. 정의하려는 것이 타입이라면 마커 인터페이스를 사용

## 마커 인터페이스 (marker interface)

**마커 인터페이스(marker interface) :** 아무 메서드도 담고 있지 않고, 단지 자신을 구현하는 클래스가 특정 속성을 가짐을 표시해주는 것

[https://t1.daumcdn.net/cfile/tistory/992B88375EF6D43930](https://t1.daumcdn.net/cfile/tistory/992B88375EF6D43930)

실제로 아무런 메서드도 담고있지 않다 : `Serializable`을 구현한 클래스의 인스턴스는 `ObjectOutputStream` 을 통해 쓸 수 있다고, 즉 직렬화 할 수 있다고 알려준다.

[https://t1.daumcdn.net/cfile/tistory/997E794F5EF6D43931](https://t1.daumcdn.net/cfile/tistory/997E794F5EF6D43931)

`ObjectOutputStream의` `writeObject0` 메서드안에는 `Serializable`의 인스턴스인지 확인하는 검증 로직이 들어가있으며, 마킹이 안되어있다고 판단되는 경우에 `NotSerializableException`이 발생한다.

## 2. 마커 인터페이스의 장점

- 마커 인터페이스는 이를 구현한 클래스의 인스턴스들을 구분하는 타입으로 쓸 수 있으나, 마커 애너테이션은 그렇지 않다.인터페이스가 어엿한 타입이므로 런타임에야 발견될 오류를 컴파일타임에 잡을 수 있다ex ) 애너테이션 : 직렬화 할 수 없는 객체를 넘겨도 런타임에야 발견 가능함
- 적용 대상을 더 정밀하게 지정할 수 있다 : 특정 인터페이스를 구현한 클래스에만 적용하게!@Target(ElementType.TYPE) : 모든 타입에 달 수 있다. (클래스, 인터페이스, 열거타입, 애너테이션)

### Set 인터페이스 : 일종의 마커 인터페이스

- Set은 Collection의 하위 타입에만 적용할 수 있다.
- Collection이 정의한 메서드 외에는 새로 추가한 것이 없다.
- 특정 인터페이스의 하위타입에만 적용할 수 있으며, 아무 규약에도 손대지 않은 마커 인터페이스는 충분히 있음직 하다
    - 객체의 특정 부분을 불변식으로 규정
    - 그 타입의 인스턴스는 다른 클래스의 특정 메서드가 처리할 수 있다는 사실을 명시하는 용도로 사용

## 3. 마커 애너테이션의 장점

- 거대한 애너테이션 시스템의 자원을 받는다.
- 애너테이션을 적극 활용하는 프레임워크에서는 애너테이션을 사용하는게 일관성에 좋다.

## 4. 사용해야할 때

1. 클래스와 인터페이스 외의 프로그램 요소 (모듈, 패키지, 필드, 지역변수)이 요소들에 마킹해야할 때 애너테이션을 쓸 수 밖에 없다.

**2. 클래스와 인터페이스 요소**"이 마킹이 된 객체를 매개변수로 받는 매서드를 작성할 일이 있을 때" : 인터페이스마커 인터페이스를 메서드의 매개변수 타입으로 사용하여 컴파일타임에 오류를 잡을 수 있다. > 아닐 때 : 애너테이션

**3. 애너테이션을 활발히 활용하는 프레임워크**마커 애너테이션을 사용하는 편이 좋다.

### 정리하자면

마커 애너테이션 등장 결과 → 마커 인터페이스 구식.. 이라는 이야기가 있지만 사실이 아님.

1. 마커 인터페이스는 이를 구현한 클래스의 인스턴스들을 구분하는 타입으로 쓸 수 있으나, 마커 애너테이션은 NO- 마커 인터페이스는 어엿한 타입. 런타임에야 발견될 오류를 컴파일 타입에 잡기 쌉가능

2. 적용 대상을 더 정밀하게 지정할 수 있다!- 적용대상(@Target)을 ElementType.TYPE으로 선언한 애너테이션은 모든 타입(클래스, 인터페이스, 열거 타입, 애너테이션)에 달 수 있어, 부착 가능 타입을 더 세밀하게 제한하지는 못한다.

Set 인터페이스도 일종의 (제약이 있는) 마커 인터페이스

### 마커 애너테이션이 더 나은 점

거대한 애너테이션 시스템의 지원을 받는다는 점.따라서, 애너테이션을 적극 활용하는 프레임워크에서는 마커 애너테이션을 쓰는 쪽이 일관성을 지키는 데유리.

- 마커 인터페이스와 마커 애너테이션은 각자의 쓰임이 있음
- *새로 추가하는 메서드 없이 단지 타입 정의가 목적이라면* **마커 인터페이스**
- 클래스나 인터페이스 외의 프로그램 요소에 마킹해야 하거나, 애너테이션을 적극 활용하는 프레임워크의 일부로 그 마커를 편입시키고자 한다면 ? **마커 애너테이션**
- 적용 대상이 ElementType.TYPE인 마커 애너테이션을 작성하고 있다면, 잠시 여유를 갖고 정말 애너테이션을 구현하는게 옳은지, 혹은 마커 인터페이스가 낫지는 않을지 곰곰이 생각해보자.
