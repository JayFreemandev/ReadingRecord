# Item8, finalizer와 cleaner 사용하지마라

# 자바에서는 2가지 객체 소멸자라는게 존재한다.

1. ~~finalizer~~
오동작, 낮은 성능, 예측 불가의 이유로 자바9에서 deprecated
2. cleaner
finalizer에 비해 덜 위험하지만 여전히 예측 불가, 느리고, 일반적으로 불 필요하다.

자바의 2가지 객체 소멸자는 즉시 수행된다는 보장이 없다.

예를 들어, 파일 닫기를 finalizer와 cleaner에 맡기면 오류가 난다.

시스템이 동시에 열 수 있는 파일 개수에는 한계가 있는데 즉시 파일이 닫히지 않고 실행이 느리게 되어 파일을 열어 둔다면 새로운 파일을 열지못해 오류가 발생한다.

객체 소멸자가 얼마나 빠르게 수행할지는 가비지 컬렉터 알고리즘에 달려있다. 

# finalizer나 cleaner는 어디에 쓰이는가?

1. 자바의 일부 라이브러리들 (File~Stream)
객체 소멸자가 즉시 호출되리란 보장은 없지만 늦게라도 해주는 것이 아예 안하는 것보다는 낫다. 
2. 네이티브 피어와 연결된 객체
    
    네이티브 피어 : 일반 자바 객체가 네이티브 메서드를 통해 기능을 위임한 네이티브 객체
    
    가비지 컬렉터는 이 네이티브 피어 존재를 알지 못한다
    
    따라서 cleaner나 finalizer가 직접 나서서 처리하기에 적당한 작업이다
    
    단, 성능 저하를 감당할 수 있고, 네이티브 피어가 심각한 자원을 가지고 있지 않을 때만 해당
    
    감당할 수 없다면, close 메서드를 사용하자
    

# 결론

1. 사용하지마라